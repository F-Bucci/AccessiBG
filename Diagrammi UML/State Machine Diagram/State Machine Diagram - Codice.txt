@startuml

state Webapp{

  [*] --> Interfaccia : Accesso webapp

  state Interfaccia{

    [*] -> View_Home
    
    state View_Home{
      [*] -> Mostra_Sedi : Mostra lista sedi
      
      Mostra_Sedi -> [*] : Mostra sede scelta
    }
    
    View_Home -> View_Sede : Visualizza sede
    
    state View_Sede{
      state c1 <<choice>>
      state c2 <<choice>>
      [*] -> c1
      c1 ---> Mostra_Sede : Visualizza dettagli sede OR Primo accesso
      c1 --> Mostra_Mappa : Visualizza mappa
      c1 --> Mostra_Parcheggi : Visualizza parcheggi
      c1 -> Mostra_Edifici : Visualizza edifici
      Mostra_Sede -> c2 : Seleziona informazioni
      Mostra_Mappa -> c2 : Seleziona informazioni
      Mostra_Parcheggi -> c2 : Seleziona informazioni
      Mostra_Edifici -> c2 : Seleziona informazioni
      c2 -> c1
      Mostra_Edifici --> [*] : Seleziona edificio
    }
      
    View_Sede -> View_Edificio : Visualizza edificio
      
    state View_Edificio{
      state c3 <<choice>>
      state c4 <<choice>>
      [*] -> c3
      c3 --> Mostra_Edificio : Visualizza dettagli edificio OR Primo accesso
      c3 -> Mostra_Ingressi : Visualizza ingressi
      Mostra_Edificio -> c4 : Seleziona informazioni
      Mostra_Edificio -> c4 : Seleziona informazioni
      c4 -> c3
      Mostra_Edificio -> Mostra_Struttura_Piano : Visualizza struttura piano
      Mostra_Struttura_Piano --> [*]
    }
      
    View_Edificio -> View_Struttura : Visualizza mappa interattiva (piano)
    
    state View_Struttura{
      state c5 <<choice>>
      [*] -> c5
      c5 -> Mostra_Piano : Mostra piano
      Mostra_Piano -> Mostra_Foto : Visualizza foto elemento
      Mostra_Foto -> c5
    }

    state History <<history*>>
    History -> View_Struttura
    
  }

  state Menu{
    
  }
  
  state c6 <<choice>>
  
  Interfaccia -> Menu : Accesso menu
  Menu --> c6

  c6 ---> History : Chiusura menu
  c6 ----> View_Home : Ritorna in Home

  Interfaccia --> [*] : Chiusura webapp

}



@enduml